#!/bin/bash

mount_hd() {
  mkdir -p "/run/media/dells/$1"
  chown -R dells "/run/media/dells/$1"
  cryptsetup open "/dev/$2"  "$1"
  mount "/dev/mapper/$1" "/run/media/dells/$1"
}

lsblk

echo "Elephant comes with a partition (/dev/sdX1)"
echo "Dumbledore does not (/dev/sdX)"

echo "What is Elephants path? (e.g. 'sdb1'):"
read -s EL_PATH
echo "What is Elephants path? (e.g. 'sdc'):"
read -s DU_PATH

mount_hd "elephant" "$EL_PATH"
mount_hd "dumbledore" "$DU_PATH"

systemctl enable --now nfs-server
exportfs -r

firewall-cmd --add-service=nfs --permanent
firewall-cmd --reload
